<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>effect2.html</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container mt-3">
        <div class="row">
            <!-- 자바스크립트의 배열을 이용해서 카드 레이아웃이 들어가는 자리 -->
        </div>
        <button type="button" class="btn btn-primary mt-2" id="more">더보기</button>
    </div>

    <script>
        var products = [
            { id: 0, price: 70000, title: 'Blossom Dress' },
            { id: 1, price: 50000, title: 'Springfield Shirt' },
            { id: 2, price: 60000, title: 'Black Monastery' }];

        // for (let i = 0; i < products.length; i++) {
        //     // 변수 안에 요소값을 추가하는 함수를 동작하는 콜백함수를 작성하기
        //     // (요소값을 계속 만들 수 없기 때문에 변수에 저장해서 템플릿을 추가하는 내용 반복해서 만들 예정)
        //     var 템플릿 = '<div class="col-sm-4">'
        //         + '<div class="card">'
        //         + '<img src="후드 라이언.png" class="card-img-top" aler="...">'
        //         + '<div class="card-body">'
        //         + '<h5 class="card-title">' + products[i].title + '</h5>'
        //         + '<p class="card-text"> 가격: ' + products[i].price + '</p>'
        //         + '</div>'
        //         + '</div>';

        //     // 템플릿을 추가할 요소를 가져오기
        //     $('.row').append(템플릿);
        // }
        function appendProducts(products) {
            products.forEach(function (product) {
                var 템플릿 = '<div class="col-sm-4">'
                    + '<div class="card">'
                    + '<img src="후드 라이언.png" class="card-img-top" aler="...">'
                    + '<div class="card-body">'
                    + '<h5 class="card-title">' + product.title + '</h5>'
                    + '<p class="card-text"> 가격: ' + product.price + '</p>'
                    + '</div>'
                    + '</div>'
                    + '</div>';

                $('.row').append(템플릿);
            });
        } // appendProducts 함수끝!

        appendProducts(products);
        $('#more').click(function () {
            console.log("실행 중");
            // 위의 한 행이 다시 한 번 만들어진다.
            appendProducts(products);

            $.ajax({
                url: "https://jsonplaceholder.typicode.com/todos?_limit=3",
                method: 'GET',
                success: function (array) {
                    console.log(array);
                    let arrayBody = $('.row');

                    for (let temp of array) {
                        let tempdata =
                           `<div class="col-sm-4"> 
                            <p>userId: ${temp.userId}</p> 
                            <p>id: ${temp.id}</p>
                            <p>title: ${temp.title}</p>
                            <p>completed: ${temp.completed}</p>
                            </div>`;

                        arrayBody.append(tempdata);
                    }

                },
                error: function (error) {
                    console.log(error.status);
                }
            });
        });

        $

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>